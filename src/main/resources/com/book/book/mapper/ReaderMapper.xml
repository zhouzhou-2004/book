<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.book.book.mapper.ReaderMapper">
<!--    &lt;!&ndash; 查询总数 &ndash;&gt;-->
<!--    <select id="selectTotal" resultType="java.lang.Long">-->
<!--        SELECT COUNT(*) FROM users-->
<!--    </select>-->

<!--    &lt;!&ndash; 查询读者列表 &ndash;&gt;-->
<!--    <select id="selectReaderList" parameterType="map" resultType="com.book.book.model.pojo.Users">-->
<!--        SELECT * FROM users-->
<!--        LIMIT #{offset}, #{pageSize}-->
<!--    </select>-->

    <!-- 查询总数 -->
    <select id="selectTotal" resultType="java.lang.Long">
        SELECT COUNT(*) FROM users
        <where>
            <if test="classNo != null and classNo != ''">
                AND class_id = #{classNo}
            </if>
            <if test="name != null and name != ''">
                AND name LIKE CONCAT('%', #{name}, '%')
            </if>
        </where>
    </select>

    <!-- 查询读者列表 -->
    <select id="selectReaderList" parameterType="map" resultType="com.book.book.model.pojo.Users">
        SELECT * FROM users
        <where>
            <if test="classNo != null and classNo != ''">
                AND class_id = #{classNo}
            </if>
            <if test="name != null and name != ''">
                AND name LIKE CONCAT('%', #{name}, '%')
            </if>
        </where>
        LIMIT #{offset}, #{pageSize}
    </select>

</mapper>